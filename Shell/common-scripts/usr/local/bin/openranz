#!/bin/bash
# OpenRA latest version available
if `which curl > /dev/null 2>&1`; then
    orlv=$(curl -sL https://github.com/OpenRA/OpenRA/releases | grep "release-.*\.tar\.gz" | head -n 1 | cut -d "/" -f 5 | cut -d '-' -f 2 | sed 's/\.tar.*//g')
elif `which wget > /dev/null 2>&1`; then
    orlv=$(wget -cqO- https://github.com/OpenRA/OpenRA/releases | grep "release-.*\.tar\.gz" | head -n 1 | cut -d "/" -f 5 | cut -d '-' -f 2 | sed 's/\.tar.*//g')
else
    zenity --error --text="Neither cURL nor wget are detected, please install them, or if installed add to system PATH!" --title="Warning!" && exit
fi     
# OpenRA latest packaged version
orpv=$(cat /data/OBS/home:fusion809/openra/openra.spec | grep "Version:" | sed 's/Version:\s*//g')

if ! [[ $orpv == $orlv ]]; then
    zenity --error --text="A new OpenRA release (${pkgver}) is available!" --title="Warning!"
fi
