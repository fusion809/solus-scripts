#!/bin/bash
if `which curl > /dev/null 2>&1`; then
    pkgver=$(curl -sL https://github.com/eranif/codelite/releases | grep "app\.tar\.gz" | head -n 1 | cut -d '/' -f 6)
elif `which wget > /dev/null 2>&1`; then
    pkgver=$(wget -cqO- https://github.com/eranif/codelite/releases | grep "app\.tar\.gz" | head -n 1 | cut -d '/' -f 6)
else
    zenity --error --text="Neither cURL nor wget has been detected. Please either install one, or if already installed add it to the system PATH." --title="Warning!"    
fi
    
cd /data/GitHub/mine/packaging/fusion809-overlay/dev-util/codelite
pkgpver=$(ls -ld * | head -n 1 | sed 's/[a-zA-Z0-9: .]*codelite/codelite/g' | cut -d '-' -f 8 | sed 's/.ebuild//g')

if ! [[ $pkgver == $pkgpver ]]; then
    zenity --error --text="A new CodeLite release (${pkgver}) is available.!" --title="Warning!"    
fi
