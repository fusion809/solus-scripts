#!/bin/bash
if `which wget > /dev/null 2>&1`; then
    pkgver=$(wget -cqO- https://foicica.com/textadept/feed | grep -vi "alpha\|beta" | grep "win32.zip" | head -n 1 | cut -d '_' -f 2 | sed 's/.win32.zip.*//g')
elif `which curl > /dev/null 2>&1`; then
    pkgver=$(curl -sL https://foicica.com/textadept/feed | grep -vi "alpha\|beta" | grep "win32.zip" | head -n 1 | cut -d '_' -f 2 | sed 's/.win32.zip.*//g')
else
    zenity --error --text="Neither cURL nor wget has been detected, please install them if not installed or add them to the system PATH if they already are." --title="Warning!"
fi

cd /data/GitHub/mine/packaging/fusion809-overlay/app-editors/textadept
pkgpver=$(ls -ld * | tail -n 1 | sed 's/.*textadept-//g' | sed 's/.ebuild//g')

if ! [[ $pkgver == $pkgpver ]]; then
    zenity --error --text="A new Textadept (${pkgver}) release is available!" --title="Warning!"    
fi
